<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>G150 샴푸추천 · 부들봇(따뜻/건조모발 보습)</title>
<link rel="preload" as="image" href="./g150-daily.png">
<style>
  /* 기존 살구톤 프레임 유지 */
  body{font-family:Arial,sans-serif;background:#fff8f0;margin:0;display:flex;justify-content:center;align-items:center;height:100vh}
  #chat-container{width:400px;background:#fff3e6;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,.1);padding:20px;overflow-y:auto;max-height:90vh;line-height:1.8}
  .bot-message,.user-message{margin:10px 0;display:flex}
  .bot-message{justify-content:flex-start}.user-message{justify-content:flex-end}
  .message{padding:10px 15px;border-radius:20px;max-width:70%}
  .bot-message .message{background:#ffd8b1;color:#5a372a}
  .user-message .message{background:#ffcba4;color:#5a372a}
  .button-container{text-align:center;margin-top:10px;display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
  button{background:#ffad8f;color:#5a372a;border:none;border-radius:5px;padding:10px 20px;cursor:pointer}
  button:hover{background:#e69c7a}
  .image-container{text-align:center;margin:10px 0}
  .image-container img{width:100%;height:200px;object-fit:contain;border-radius:10px}
</style>
</head>
<body>
<div id="chat-container"></div>

<script>
const chatContainer=document.getElementById('chat-container');
const IMG_URL="./g150-daily.png";

/* 부들봇(따뜻) – Kull et al.의 '따뜻한 첫 멘트' 원칙 적용
   첫 인사: “제가 도와드려도 될까요?” 그대로 사용 (+ 이모지 1회)
   시나리오: 다수가 경험하는 ‘건조한 모발’ 보습 케어 추천
   구조: 6턴 고정, 정보슬롯(보습효과/근거 → 성분/향 → 사용 가이드) 동일화 */
const conversation=[
  { type:'bot',
    message:'안녕하세요! 제가 도와드려도 될까요? 건조하고 푸석해진 모발을 편안하게 관리할 수 있도록 안내드릴게요 😊',
    buttons:[{text:'시작하기', nextIndex:1}]
  },
  { type:'bot',
    message:'원하시는 항목을 선택해 주세요. 보습 관련 핵심 정보를 순서대로 안내드립니다.',
    buttons:[
      {text:'보습 효과/근거', nextIndex:2},
      {text:'성분/향', nextIndex:2},
      {text:'사용 가이드', nextIndex:2}
    ]
  },
  { type:'bot',
    message:'추천 제품은 <b>G150 Daily Shampoo</b>예요. 건조 모발의 수분 유지에 도움을 주도록 설계되었고, 내부 평가 요약에서 세정 후 촉감 개선이 보고되었습니다.',
    image: IMG_URL,
    buttons:[{text:'계속', nextIndex:3}]
  },
  { type:'bot',
    message:'주요 성분은 판테놀·글리세린으로 수분을 끌어당기고 유지하는 데 기여해요. 향은 은은하고 부드럽게 느껴지도록 구성했어요.',
    buttons:[{text:'계속', nextIndex:4}]
  },
  { type:'bot',
    message:'주 3–4회 사용을 권장해요. 모발에 도포한 뒤 1–2분 유지하고 충분히 헹궈 주세요. 중간부터 끝 부분에 가볍게 마사지하면 촉촉한 마무음에 도움이 됩니다.',
    buttons:[{text:'자극이 걱정돼요', nextIndex:5}]
  },
  { type:'bot',
    message:'저자극 관련 시험을 통과했어요. 다만 개인차가 있을 수 있으니 라벨과 요약 문서를 함께 확인해 주세요.',
    buttons:[]
  }
];

function addMessage(type,text){
  const row=document.createElement('div'); row.className=type==='bot'?'bot-message':'user-message';
  const bubble=document.createElement('div'); bubble.className='message'; bubble.innerHTML=text;
  row.appendChild(bubble); chatContainer.appendChild(row); chatContainer.scrollTop=chatContainer.scrollHeight;
}
function addImage(url){
  const c=document.createElement('div'); c.className='image-container';
  const img=document.createElement('img'); img.src=url; img.alt='G150 Daily Shampoo bottle'; img.loading='eager';
  c.appendChild(img); chatContainer.appendChild(c); chatContainer.scrollTop=chatContainer.scrollHeight;
}
function addButtons(buttons){
  const bc=document.createElement('div'); bc.className='button-container';
  buttons.forEach(b=>{
    const el=document.createElement('button'); el.textContent=b.text;
    el.onclick=()=>{ addMessage('user', b.text); if(b.nextIndex!==null && b.nextIndex!==undefined) loadConversation(b.nextIndex); };
    bc.appendChild(el);
  });
  chatContainer.appendChild(bc); chatContainer.scrollTop=chatContainer.scrollHeight;
}
function clearButtons(){ document.querySelectorAll('.button-container').forEach(n=>n.remove()); }
function loadConversation(i){
  clearButtons();
  const step=conversation[i];
  addMessage('bot', step.message);
  if(step.image) addImage(step.image);
  if(step.buttons) addButtons(step.buttons);
}

// 프리로드 후 시작(세 조건 동일 이미지 사용)
new Image().src = IMG_URL;
loadConversation(0);
</script>
</body>
</html>

